{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/15-us-map.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","2","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","d3","w","h","projection","geoAlbersUsa","translate","path","geoPath","color","scaleQuantize","range","formatAsThousands","format","formatDecimals","svg","select","append","attr","zoom","scaleExtent","translateExtent","on","offset","event","transform","x","y","newScale","k","scale","selectAll","lon","lat","centroid","center","map","zoomIdentity","csv","then","domain","min","max","json","dataState","state","dataValue","parseFloat","features","properties","enter","style","text","cities","Math","sqrt","parseInt","population","place","createPanButtons","createZoomButtons","north","html","south","west","east","this","transition","translateBy","zoomIn","zoomOut","scaleFactor","scaleBy"],"mappings":"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","file":"us_map.bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t2: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([6,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import * as d3 from 'd3';\nimport './15-us-map.css';\n\n// Width and height\nconst w = 500;\nconst h = 300;\n\n// Define path generator, using the Albers USA projection\nconst projection = d3.geoAlbersUsa().translate([0, 0]);\nconst path = d3.geoPath().projection(projection);\n\n// Define quantize scale to sort data values into buckets of color\nvar color = d3\n  .scaleQuantize()\n  .range([\n    'rgb(237,248,233)',\n    'rgb(186,228,179)',\n    'rgb(116,196,118)',\n    'rgb(49,163,84)',\n    'rgb(0,109,44)'\n  ]);\n// Colors derived from ColorBrewer, by Cynthia Brewer, and included in\n// https://github.com/d3/d3-scale-chromatic\n\n// Number formatting for population values\nconst formatAsThousands = d3.format(','); // e.g. converts 123456 to \"123,456\"\n\n// Number formatting for ag productivity values\nconst formatDecimals = d3.format('.3'); // e.g. converts 1.23456 to \"1.23\"\n\n// Create SVG element\nconst svg = d3\n  .select('body')\n  .append('svg')\n  .attr('width', w)\n  .attr('height', h);\n\n// Define what to do when panning or zooming\nconst zooming = d => {\n  // Log out d3.event.transform, so you can see all the goodies inside\n  // console.log(d3.event.transform);\n\n  // New offset array\n  const offset = [d3.event.transform.x, d3.event.transform.y];\n\n  // Calculate new scale\n  const newScale = d3.event.transform.k * 2000;\n\n  // Update projection with new offset and scale\n  projection.translate(offset).scale(newScale);\n\n  // Update all paths and circles\n  svg.selectAll('path').attr('d', path);\n  svg\n    .selectAll('circle')\n    .attr('cx', d => projection([d.lon, d.lat])[0])\n    .attr('cy', d => projection([d.lon, d.lat])[1]);\n\n  svg\n    .selectAll('.label')\n    .attr('x', d => path.centroid(d)[0])\n    .attr('y', d => path.centroid(d)[1]);\n};\n\n// Then define the zoom behavior\nconst zoom = d3\n  .zoom()\n  .scaleExtent([0.2, 2.0])\n  .translateExtent([[-1200, -700], [1200, 700]])\n  .on('zoom', zooming);\n\n// The center of the country, roughly\nconst center = projection([-97.0, 39.0]);\n\n// Create a container in which all zoom-able elements will live\nconst map = svg\n  .append('g')\n  .attr('id', 'map')\n  .call(zoom) // Bind the zoom behavior\n  .call(\n    zoom.transform,\n    d3.zoomIdentity // Then apply the initial transform\n      .translate(w / 2, h / 2)\n      .scale(0.25)\n      .translate(-center[0], -center[1])\n  );\n\n// Create a new, invisible background rect to catch zoom events\nmap\n  .append('rect')\n  .attr('x', 0)\n  .attr('y', 0)\n  .attr('width', w)\n  .attr('height', h)\n  .attr('opacity', 0);\n\n// Load in agriculture data\nd3.csv('data/us-ag-productivity.csv').then(data => {\n  // Set input domain for color scale\n  color.domain([d3.min(data, d => d.value), d3.max(data, d => d.value)]);\n\n  // Load in GeoJSON data\n  d3.json('data/us-states.json').then(json => {\n    // Merge the ag. data and GeoJSON\n    // Loop through once for each ag. data value\n    for (let i = 0; i < data.length; i++) {\n      // Grab state name\n      const dataState = data[i].state;\n\n      // Grab data value, and convert from string to float\n      const dataValue = parseFloat(data[i].value);\n\n      // Find the corresponding state inside the GeoJSON\n      for (let j = 0; j < json.features.length; j++) {\n        const jsonState = json.features[j].properties.name;\n\n        if (dataState == jsonState) {\n          // Copy the data value into the JSON\n          json.features[j].properties.value = dataValue;\n\n          // Stop looking through the JSON\n          break;\n        }\n      }\n    }\n\n    // Bind data and create one path per GeoJSON feature\n    map\n      .selectAll('path')\n      .data(json.features)\n      .enter()\n      .append('path')\n      .attr('d', path)\n      .style('fill', d => {\n        // Get data value\n        const value = d.properties.value;\n\n        if (value) {\n          // If value exists...\n          return color(value);\n        } else {\n          // If value is undefined...\n          return '#ccc';\n        }\n      });\n\n    // Create one label per state\n    map\n      .selectAll('text')\n      .data(json.features)\n      .enter()\n      .append('text')\n      .attr('class', 'label')\n      .attr('x', d => path.centroid(d)[0])\n      .attr('y', d => path.centroid(d)[1])\n      .text(d => {\n        if (d.properties.value) {\n          return formatDecimals(d.properties.value);\n        }\n      });\n\n    // Load in cities data\n    d3.csv('data/us-cities.csv').then(cities => {\n      map\n        .selectAll('circle')\n        .data(cities)\n        .enter()\n        .append('circle')\n        .attr('cx', d => projection([d.lon, d.lat])[0])\n        .attr('cy', d => projection([d.lon, d.lat])[1])\n        .attr('r', d => Math.sqrt(parseInt(d.population) * 0.00004))\n        .style('fill', 'yellow')\n        .style('stroke', 'gray')\n        .style('stroke-width', 0.25)\n        .style('opacity', 0.75)\n        .append('title') // Simple tooltip\n        .text(d => `${d.place}: Pop. ${formatAsThousands(d.population)}`);\n\n      createPanButtons();\n      createZoomButtons();\n    });\n  });\n});\n\nconst createPanButtons = () => {\n  // Create the clickable groups\n\n  // North\n  const north = svg\n    .append('g')\n    .attr('class', 'pan') // All share the 'pan' class\n    .attr('id', 'north'); // The ID will tell us which direction to head\n  north\n    .append('rect')\n    .attr('x', 0)\n    .attr('y', 0)\n    .attr('width', w)\n    .attr('height', 30);\n  north\n    .append('text')\n    .attr('x', w / 2)\n    .attr('y', 20)\n    .html('&uarr;');\n\n  // South\n  const south = svg\n    .append('g')\n    .attr('class', 'pan')\n    .attr('id', 'south');\n  south\n    .append('rect')\n    .attr('x', 0)\n    .attr('y', h - 30)\n    .attr('width', w)\n    .attr('height', 30);\n  south\n    .append('text')\n    .attr('x', w / 2)\n    .attr('y', h - 10)\n    .html('&darr;');\n\n  // West\n  const west = svg\n    .append('g')\n    .attr('class', 'pan')\n    .attr('id', 'west');\n  west\n    .append('rect')\n    .attr('x', 0)\n    .attr('y', 30)\n    .attr('width', 30)\n    .attr('height', h - 60);\n  west\n    .append('text')\n    .attr('x', 15)\n    .attr('y', h / 2)\n    .html('&larr;');\n\n  // East\n  const east = svg\n    .append('g')\n    .attr('class', 'pan')\n    .attr('id', 'east');\n  east\n    .append('rect')\n    .attr('x', w - 30)\n    .attr('y', 30)\n    .attr('width', 30)\n    .attr('height', h - 60);\n  east\n    .append('text')\n    .attr('x', w - 15)\n    .attr('y', h / 2)\n    .html('&rarr;');\n\n  // Panning interaction\n  d3.selectAll('.pan').on('click', function() {\n    // Set how much to move on each click\n    const moveAmount = 50;\n\n    // Set x/y to zero for now\n    let x = 0;\n    let y = 0;\n\n    // Which way are we headed?\n    const direction = d3.select(this).attr('id');\n\n    // Modify the offset, depending on the direction\n    switch (direction) {\n      case 'north':\n        y += moveAmount; // Increase y offset\n        break;\n      case 'south':\n        y -= moveAmount; // Decrease y offset\n        break;\n      case 'west':\n        x += moveAmount; // Increase x offset\n        break;\n      case 'east':\n        x -= moveAmount; // Decrease x offset\n        break;\n      default:\n        break;\n    }\n\n    // This triggers a zoom event, translating by x, y\n    map.transition().call(zoom.translateBy, x, y);\n  });\n};\n\n// Create zoom buttons\nconst createZoomButtons = () => {\n  // Create the clickable groups\n  // Zoom in button\n  const zoomIn = svg\n    .append('g')\n    .attr('class', 'zoom') // All share the 'zoom' class\n    .attr('id', 'in') // The ID will tell us which direction to head\n    .attr('transform', 'translate(' + (w - 110) + ',' + (h - 70) + ')');\n  zoomIn\n    .append('rect')\n    .attr('x', 0)\n    .attr('y', 0)\n    .attr('width', 30)\n    .attr('height', 30);\n  zoomIn\n    .append('text')\n    .attr('x', 15)\n    .attr('y', 20)\n    .text('+');\n\n  // Zoom out button\n  const zoomOut = svg\n    .append('g')\n    .attr('class', 'zoom')\n    .attr('id', 'out')\n    .attr('transform', 'translate(' + (w - 70) + ',' + (h - 70) + ')');\n  zoomOut\n    .append('rect')\n    .attr('x', 0)\n    .attr('y', 0)\n    .attr('width', 30)\n    .attr('height', 30);\n  zoomOut\n    .append('text')\n    .attr('x', 15)\n    .attr('y', 20)\n    .html('&ndash;');\n\n  // Zooming interaction\n  d3.selectAll('.zoom').on('click', function() {\n    // Set how much to scale on each click\n    let scaleFactor;\n\n    // Which way are we headed?\n    const direction = d3.select(this).attr('id');\n\n    // Modify the k scale value, depending on the direction\n    switch (direction) {\n      case 'in':\n        scaleFactor = 1.5;\n        break;\n      case 'out':\n        scaleFactor = 0.75;\n        break;\n      default:\n        break;\n    }\n\n    // This triggers a zoom event, scaling by 'scaleFactor'\n    map.transition().call(zoom.scaleBy, scaleFactor);\n  });\n};\n\n// Bind 'Pacific Northwest' button behavior\nd3.select('#pnw').on('click', () => {\n  map.transition().call(\n    zoom.transform,\n    d3.zoomIdentity\n      .translate(w / 2, h / 2)\n      .scale(0.9)\n      .translate(600, 300)\n  );\n});\n\n// Bind 'Reset' button behavior\nd3.select('#reset').on('click', () => {\n  map.transition().call(\n    zoom.transform,\n    d3.zoomIdentity // Same as the initial transform\n      .translate(w / 2, h / 2)\n      .scale(0.25)\n      .translate(-center[0], -center[1])\n  );\n});\n"],"sourceRoot":""}